start /phenix/u/jinhuang/work/sPHENIX/simulation/calibrations/HCALOUT/macros /direct/phenix+u/jinhuang/bin/run.sh Construct_DeadTowerMap
Thu May  3 20:13:06 EDT 2018
Linux rcas2072.rcf.bnl.gov 2.6.32-696.18.7.el6.x86_64 #1 SMP Wed Jan 3 19:31:16 CST 2018 x86_64 x86_64 x86_64 GNU/Linux
============================================================
Environment Settings
============================================================
LANG=C
USER=jinhuang
LOGNAME=jinhuang
HOME=/phenix/u/jinhuang
PATH=/direct/phenix+u/jinhuang/bin:/phenix/u/jinhuang/work/sPHENIX/simulation//install/bin:/opt/gcc/4.8.2/bin:/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/bin:/opt/sphenix/utils/bin:/opt/sphenix/core/bin:.:/usr/local/bin:/bin:/usr/bin:/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4/bin:/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4/bin:/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4/root/bin:/afs/rhic.bnl.gov/app/insure-7.4.6/bin:/afs/rhic.bnl.gov/opt/d-cache/dcap/bin:/afs/rhic.bnl.gov/app/coverity-8.7.1/bin:/afs/rhic.bnl.gov/x8664_sl6/opt/sphenix/core/geant4.10.02.p02/bin
MAIL=/var/spool/mail/jinhuang
SHELL=/bin/tcsh
SSH_CLIENT=130.199.6.206 55486 22
SSH_CONNECTION=130.199.6.206 55486 130.199.182.194 22
SSH_TTY=/dev/pts/1
TERM=xterm
DISPLAY=localhost:14.0
SSH_AUTH_SOCK=/tmp/ssh-yJSZV26819/agent.26819
HOSTTYPE=x86_64-linux
VENDOR=unknown
OSTYPE=linux
MACHTYPE=x86_64
SHLVL=2
PWD=/phenix/u/jinhuang/work/sPHENIX/simulation/calibrations/HCALOUT/macros
GROUP=rhphenix
HOST=rcas2072.rcf.bnl.gov
REMOTEHOST=nx05.rcf.bnl.gov
HOSTNAME=rcas2072.rcf.bnl.gov
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.tbz=01;31:*.tbz2=01;31:*.bz=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:
CVS_RSH=ssh
G_BROKEN_FILENAMES=1
KDEDIRS=/usr
LESSOPEN=|/usr/bin/lesspipe.sh %s
MODULESHOME=/usr/share/Modules
MODULEPATH=/usr/share/Modules/modulefiles:/etc/modulefiles
LOADEDMODULES=
QTDIR=/usr/lib64/qt-3.3
QTINC=/usr/lib64/qt-3.3/include
QTLIB=/usr/lib64/qt-3.3/lib
HomeDir=/direct/phenix+u/jinhuang
HomeServer=kirby2.lns.mit.edu
CVSEDITOR=jedit
EDITOR=jedit
ANALYZER=/direct/phenix+u/jinhuang/analyzer-cvs/
LD_LIBRARY_PATH=/phenix/u/jinhuang/work/sPHENIX/simulation//install/lib:.:/opt/sphenix/core/lib:/opt/sphenix/utils/lib::/usr/local/lib64:/usr/lib64:/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4/lib:/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4/lib:/afs/rhic.bnl.gov/x8664_sl6/opt/sphenix/core/root-5.34.36/lib:/afs/rhic.bnl.gov/app/insure-7.4.6/lib:/afs/rhic.bnl.gov/x8664_sl6/opt/sphenix/core/geant4.10.02.p02/lib64:/opt/sphenix/core/lhapdf-5.9.1/lib
DCACHE_RAHEAD=
DCACHE_RA_BUFFER=2097152
ORIG_PATH=./:/direct/phenix+u/jinhuang/bin:/opt/phenix/bin/:/usr/local/texlive/2010/bin/i386-linux:/usr/local/bin:/usr/kerberos/bin:/usr/local/bin:/usr/bin:/usr/local/sbin/:/bin:/usr/X11R6/bin:/direct/phenix+u/jinhuang/root/bin:/sbin:/usr/sbin:/site/bin/:/apps/bin:/usr/lib/qt4/bin/:/direct/phenix+u/jinhuang/bin:/direct/phenix+u/jinhuang/analyzer-cvs//:/direct/phenix+u/jinhuang/work/CodeTest/jre1.6.0_29/bin/:/afs/rhic.bnl.gov/@sys/opt/phenix/geant4.10.00.p02/bin:.:/opt/phenix/stow/llvm-3.5.0/tools/clang/tools/scan-build:/opt/phenix/stow/llvm-3.5.0/bin:/opt/phenix/bin:/usr/local/bin:/bin:/usr/bin:/afs/rhic.bnl.gov/phenix/PHENIX_LIB/sys/x8664_sl6/new.1/bin:/direct/phenix+u/jinhuang/root/bin:/afs/rhic.bnl.gov/app/insure-7.4.6/bin:/afs/rhic.bnl.gov/opt/d-cache/dcap/bin:/afs/rhic.bnl.gov/app/coverity-8.7.1/bin:/cern/pro/bin:/afs/rhic.bnl.gov/x8664_sl6/opt/phenix/geant4.10.00.p02/bin
ORIG_LD_LIBRARY_PATH=.:/opt/phenix/lib:/usr/local/lib:/usr/lib:/afs/rhic.bnl.gov/phenix/PHENIX_LIB/sys/x8664_sl6/new.1/lib:/afs/rhic.bnl.gov/x8664_sl6/opt/phenix/root-5.30.03-patched/lib:/afs/rhic.bnl.gov/app/insure-7.4.6/lib:/cern/pro/lib:/afs/rhic.bnl.gov/x8664_sl6/opt/phenix/geant4.10.00.p02/lib:/opt/phenix/64/lib
CONFIG_SITE=/opt/sphenix/core/etc/config.site
PGHOST=phnxdbrcf2
PGUSER=phnxrc
PG_PHENIX_DBNAME=Phenix_phnxdbrcf2_C
GSEARCHPATH=.:PG
FVTX_WORK=/phenix/u/jinhuang/work/sPHENIX/simulation/
LIBGL_ALWAYS_INDIRECT=1
OPT_SPHENIX=/opt/sphenix/core
OPT_UTILS=/opt/sphenix/utils
PERL5LIB=/opt/sphenix/utils/lib64/perl5:/opt/sphenix/utils/share/perl5
XERCESCROOT=/opt/sphenix/core
LHAPATH=/opt/sphenix/core/lhapdf-5.9.1/share/lhapdf/PDFsets
OFFLINE_MAIN=/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4
CALIBRATIONROOT=/phenix/u/jinhuang/work/sPHENIX/simulation//calibrations/
ONLINE_MAIN=/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4
ROOTSYS=/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4/root
PYTHIA8=/afs/rhic.bnl.gov/sphenix/sys/x8664_sl6/new.4/share/Pythia8
PARASOFT=/afs/rhic.bnl.gov/app/insure-7.4.6
G4_MAIN=/afs/rhic.bnl.gov/x8664_sl6/opt/sphenix/core/geant4.10.02.p02
G4NEUTRONHPDATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/G4NDL4.5
G4LEDATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/G4EMLOW6.48
G4LEVELGAMMADATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/PhotonEvaporation3.2
G4RADIOACTIVEDATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/RadioactiveDecay4.3.2
G4NEUTRONXSDATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/G4NEUTRONXS1.4
G4PIIDATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/G4PII1.3
G4REALSURFACEDATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/RealSurface1.0
G4SAIDXSDATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/G4SAIDDATA1.1
G4ABLADATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/G4ABLA3.0
G4ENSDFSTATEDATA=/afs/rhic.bnl.gov/@sys/opt/sphenix/core/geant4.10.02.p02/share/Geant4-10.2.2/data/G4ENSDFSTATE1.2.3
MANPATH=/usr/local/share/man:/usr/share/man/overrides:/usr/share/man:/usr/man:/opt/sphenix/core/share/man
DATE=2018-05-03_12:16
============================================================
Reco script : Construct_DeadTowerMap.C
============================================================
// $$Id: $$
#include <TVector2.h>
#include <iostream>

using namespace std;

void Construct_DeadTowerMap(
//    const double dead_tower_ratio = 0.1,
//    const string description = "10-percent dead tower as assigned in threshold key performance parameter"//
            const double dead_tower_ratio = 0.05,
        const string description = "5-percent dead tower as assigned in objective key performance parameter"//
        )
{
  const int nbin_eta = 12 * 2 ;
  const int nbin_phi = 64;

  cout << "Construct_DeadTowerMap() - nbin_eta = " << nbin_eta << ", nbin_phi = " << nbin_phi << ", dead_tower_ratio = " << dead_tower_ratio << endl;

  gSystem->Load("libphparameter.so");

  TRandom3 rnd(1234);

  PHParameters *param = new PHParameters("HCALOUT");

  param->set_string_param("description", description);

  int cnt = 0;

  map<int, int> dead_channels;

  while (cnt < nbin_eta * nbin_phi * dead_tower_ratio)
  {
    const int eta = rnd.Integer(nbin_eta);
    const int phi = rnd.Integer(nbin_phi);

    const int ID = eta * nbin_phi + phi;

    if (dead_channels[ID] == 0)
    {
      //      dead_channels.insert(ID);
      dead_channels[ID] = 1;

      param->set_int_param(Form("deadtower_eta_%d_phi_%d", eta, phi), 1);
      ++cnt;
    }
  }

  param->set_int_param("deadtower_size", cnt);

  //  storage
  param->Print();

  string dir_name(Form("../DeadMap_%.0fPercent/", dead_tower_ratio * 100));
  gSystem->mkdir(dir_name.c_str());

  param->WriteToFile("xml", dir_name);
}
============================================================
Reco root -b -q Construct_DeadTowerMap.C
============================================================
  *******************************************
  *                                         *
  *        W E L C O M E  to  R O O T       *
  *                                         *
  *   Version   5.34/36      5 April 2016   *
  *                                         *
  *  You are welcome to visit our Web site  *
  *          http://root.cern.ch            *
  *                                         *
  *******************************************

ROOT 5.34/36 (v5-34-36@v5-34-36, Apr 05 2016, 10:25:45 on linuxx8664gcc)

CINT/ROOT C/C++ Interpreter version 5.18.00, July 2, 2010
Type ? for help. Commands must be C++ statements.
Enclose multiple statements between { }.

Processing Construct_DeadTowerMap.C...
Construct_DeadTowerMap() - nbin_eta = 24, nbin_phi = 64, dead_tower_ratio = 0.05
Parameters for HCALOUT
int parameters: 
deadtower_eta_0_phi_1: 1
deadtower_eta_0_phi_2: 1
deadtower_eta_0_phi_63: 1
deadtower_eta_10_phi_13: 1
deadtower_eta_10_phi_39: 1
deadtower_eta_10_phi_41: 1
deadtower_eta_10_phi_60: 1
deadtower_eta_10_phi_62: 1
deadtower_eta_11_phi_1: 1
deadtower_eta_11_phi_13: 1
deadtower_eta_12_phi_25: 1
deadtower_eta_12_phi_28: 1
deadtower_eta_12_phi_31: 1
deadtower_eta_12_phi_38: 1
deadtower_eta_12_phi_44: 1
deadtower_eta_13_phi_10: 1
deadtower_eta_13_phi_27: 1
deadtower_eta_13_phi_3: 1
deadtower_eta_14_phi_21: 1
deadtower_eta_14_phi_24: 1
deadtower_eta_14_phi_45: 1
deadtower_eta_14_phi_52: 1
deadtower_eta_14_phi_56: 1
deadtower_eta_14_phi_62: 1
deadtower_eta_15_phi_28: 1
deadtower_eta_16_phi_21: 1
deadtower_eta_16_phi_24: 1
deadtower_eta_16_phi_29: 1
deadtower_eta_16_phi_58: 1
deadtower_eta_17_phi_42: 1
deadtower_eta_17_phi_51: 1
deadtower_eta_18_phi_18: 1
deadtower_eta_18_phi_4: 1
deadtower_eta_18_phi_49: 1
deadtower_eta_18_phi_50: 1
deadtower_eta_18_phi_55: 1
deadtower_eta_19_phi_2: 1
deadtower_eta_19_phi_52: 1
deadtower_eta_19_phi_57: 1
deadtower_eta_1_phi_16: 1
deadtower_eta_1_phi_39: 1
deadtower_eta_1_phi_59: 1
deadtower_eta_1_phi_63: 1
deadtower_eta_20_phi_36: 1
deadtower_eta_21_phi_15: 1
deadtower_eta_21_phi_3: 1
deadtower_eta_21_phi_30: 1
deadtower_eta_21_phi_46: 1
deadtower_eta_21_phi_7: 1
deadtower_eta_22_phi_10: 1
deadtower_eta_22_phi_25: 1
deadtower_eta_22_phi_52: 1
deadtower_eta_23_phi_18: 1
deadtower_eta_23_phi_24: 1
deadtower_eta_23_phi_7: 1
deadtower_eta_2_phi_0: 1
deadtower_eta_2_phi_42: 1
deadtower_eta_2_phi_5: 1
deadtower_eta_2_phi_56: 1
deadtower_eta_3_phi_35: 1
deadtower_eta_4_phi_31: 1
deadtower_eta_4_phi_44: 1
deadtower_eta_4_phi_58: 1
deadtower_eta_5_phi_20: 1
deadtower_eta_5_phi_4: 1
deadtower_eta_6_phi_12: 1
deadtower_eta_6_phi_48: 1
deadtower_eta_6_phi_9: 1
deadtower_eta_7_phi_29: 1
deadtower_eta_7_phi_44: 1
deadtower_eta_7_phi_48: 1
deadtower_eta_8_phi_0: 1
deadtower_eta_8_phi_47: 1
deadtower_eta_8_phi_6: 1
deadtower_eta_8_phi_7: 1
deadtower_eta_9_phi_34: 1
deadtower_eta_9_phi_50: 1
deadtower_size: 77
double parameters: 
string parameters: 
description: 5-percent dead tower as assigned in objective key performance parameter
PHParameters::WriteToFile - save to ../DeadMap_5Percent/hcalout_geoparams-0-0-4294967295-1525392787.xml
sleeping 1 second to prevent duplicate inserttimes
	Command being timed: "root -b -q Construct_DeadTowerMap.C"
	User time (seconds): 0.55
	System time (seconds): 0.19
	Percent of CPU this job got: 42%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:01.78
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 194080
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 15784
	Voluntary context switches: 34
	Involuntary context switches: 117
	Swaps: 0
	File system inputs: 24
	File system outputs: 104
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
Thu May  3 20:13:08 EDT 2018
